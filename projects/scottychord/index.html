<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>ScottyChord | Andrew Gao</title> <meta name="author" content="Andrew Gao"> <meta name="description" content=""> <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha256-DF7Zhf293AJxJNTmh5zhoYYIMs2oXitRfBjY+9L//AY=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.21.4/dist/bootstrap-table.min.css"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/academicons@1.9.1/css/academicons.min.css" integrity="sha256-i1+4qU2G2860dGGIOJscdC30s9beBXjFfzjWLjBRsBg=" crossorigin="anonymous"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/github.css" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%9A%9B%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://agao1224.github.io/projects/scottychord/"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/native.css" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js?96d6b3e1c3604aca8b6134c7afdd5db6"></script> <script src="/assets/js/dark_mode.js?9b17307bb950ffa2e34be0227f53558f"></script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"><span class="font-weight-bold">Andrew </span>Gao</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about</a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">projects</a> </li> <li class="nav-item "> <a class="nav-link" href="/booklist/">books</a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fas fa-moon"></i> <i class="fas fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5"> <div class="post"> <header class="post-header"> <h1 class="post-title">ScottyChord</h1> <p class="post-description"></p> </header> <article> <p>ScottyChord is a remote-controlled piano built during CMU’s annual <a href="https://www.build18.org/" rel="external nofollow noopener" target="_blank">Build18 hardware hackathon</a>. How it works is: you press keys on a laptop to “record” a song, then ScottyChord plays it back to you.</p> <div class="row"> <div class="col-sm mt-1 mt-sm-0"> <figure> <picture> <img src="/assets/img/scottychord1.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" title="ScottyChord" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Final project at demo day </div> <h2 id="software">Software</h2> <p>The software consists of both the display for interacting with the piano and the microcontroller code that processes the user’s input and plays it back on the piano. I built the user interface using <code class="language-plaintext highlighter-rouge">pygame</code>, and data was streamed from laptop to microcontroller through USB via <code class="language-plaintext highlighter-rouge">pyserial</code>. The user input was encoded as a specially-formatted string with notes and in-between delays which implements the concept of rhythm. Basically, I take the time between two notes, divide by some small time delta (e.g. 100ms), and encode this into the string as an ‘X’. So an example of an encoded song in this format would be:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>EDCDEEEXXXXDDDXXXXEEEXXXXEDCDEEEEDDEDC (Mary Had a Little Lamb)
</code></pre></div></div> <p>This was the simplest and most efficient way to encode songs and transfer them over to the microcontroller to process.</p> <p>The microcontroller then receives a stream of bytes and decodes them into a string of the format above. It goes char-by-char and either calls <code class="language-plaintext highlighter-rouge">delay()</code> when encountering an <code class="language-plaintext highlighter-rouge">X</code>, or sends digital signals to various digital pins. These pins are each hooked up to a relay that connects our 9V power supply to one of the motors. When on, the motor spins the hammer and hits the string, producing sound.</p> <h3 id="hardware">Hardware</h3> <p>There are two components to the hardware: mechanical and electrical. My project partner was responsible for all of the mechanical components (instrument body, strings, structure) while I was responsible for all electrical components (motors, wiring, microcontroller, relay, power).</p> <h5 id="mechanical">Mechanical</h5> <p>My partner CAD’ed three layers for the instrument body. The strings would be strung across the top layer, set in place by metal pegs; the second layer would be where the playing mechanism would be; and the third layer is where all our electronics would lie. We ordered a huge, 4” x 8” piece of plywood and laser cut all the layers out for the body. Also, my partner plays all sorts of instruments and picked Lyre strings. This was a really important consideration since Lyre strings require much less force to produce sound. Many Build18 groups that chose to build some sort of instrument couldn’t get theirs to work because they picked strings that were too heavy to pluck/strum/hit (e.g. guitar strings). Attached to each motor is a small wooden hammer that’s used to hit its corresponding string. We also put felt at the bottom of the motor so that the hammers wouldn’t clack too loudly when they fell.</p> <h5 id="electrical">Electrical</h5> <p>The electrical part consisted of a microcontroller (Arduino Uno) with digital pins connected to various relays. Each relay was connected to a small DC motor, digital pin output of the microcontroller, and a shared 9V battery power supply. When the relay is on, the battery powers the motor, and the hammer hits the string. We originally thought of using one 9V battery per motor (overkill), but realized that a single 9V battery was enough to power the whole system.</p> <h2 id="setbacks">Setbacks</h2> <ol> <li> <p><b> Playing mechanism: </b> Originally, we came up with a much more complicated mechanism to pluck the strings, much like that of a Harpsichord. We realized the night before demo day that our motors were too weak and didn’t generate enough force to pluck the strings. We experimented with a series of other mechanisms and pivoted last-minute to the motor and wooden hammer mechanism (more like a piano).</p> </li> <li> <p><b> Warping: </b> While tuning the Lyre strings, we realized that the instrument kept getting out of tune within seconds. After messing around with the strings we found the wood was warping. When we tuned the strings, the wood warped significantly which would quickly slacken the recently-tuned strings and make the instrument out-of-tune again. We fixed this by hackily wrapping tape pulling the top layer and bottom layer together. This actually worked pretty well.</p> </li> </ol> </article> </div> </div> <footer class="fixed-bottom"> <div class="container mt-0"> </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha256-fgLAgv7fyCGopR/gBNq2iW3ZKIdqIcyshnUULC4vex8=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js"></script> <script defer src="https://unpkg.com/bootstrap-table@1.21.4/dist/bootstrap-table.min.js"></script> <script src="/assets/js/no_defer.js?d633890033921b33e0ceb13d22340a9c"></script> <script defer src="/assets/js/common.js?acdb9690d7641b2f8d40529018c71a01"></script> <script defer src="/assets/js/copy_code.js?c9d9dd48933de3831b3ee5ec9c209cac" type="text/javascript"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>